{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { TemplateRef, Directive, Input, NgModule } from '@angular/core';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nclass NzStringTemplateOutletDirective {\n  constructor(viewContainer, templateRef) {\n    this.viewContainer = viewContainer;\n    this.templateRef = templateRef;\n    this.embeddedViewRef = null;\n    this.context = new NzStringTemplateOutletContext();\n    this.nzStringTemplateOutletContext = null;\n    this.nzStringTemplateOutlet = null;\n  }\n\n  static ngTemplateContextGuard(_dir, _ctx) {\n    return true;\n  }\n\n  recreateView() {\n    this.viewContainer.clear();\n    const isTemplateRef = this.nzStringTemplateOutlet instanceof TemplateRef;\n    const templateRef = isTemplateRef ? this.nzStringTemplateOutlet : this.templateRef;\n    this.embeddedViewRef = this.viewContainer.createEmbeddedView(templateRef, isTemplateRef ? this.nzStringTemplateOutletContext : this.context);\n  }\n\n  updateContext() {\n    const isTemplateRef = this.nzStringTemplateOutlet instanceof TemplateRef;\n    const newCtx = isTemplateRef ? this.nzStringTemplateOutletContext : this.context;\n    const oldCtx = this.embeddedViewRef.context;\n\n    if (newCtx) {\n      for (const propName of Object.keys(newCtx)) {\n        oldCtx[propName] = newCtx[propName];\n      }\n    }\n  }\n\n  ngOnChanges(changes) {\n    const {\n      nzStringTemplateOutletContext,\n      nzStringTemplateOutlet\n    } = changes;\n\n    const shouldRecreateView = () => {\n      let shouldOutletRecreate = false;\n\n      if (nzStringTemplateOutlet) {\n        if (nzStringTemplateOutlet.firstChange) {\n          shouldOutletRecreate = true;\n        } else {\n          const isPreviousOutletTemplate = nzStringTemplateOutlet.previousValue instanceof TemplateRef;\n          const isCurrentOutletTemplate = nzStringTemplateOutlet.currentValue instanceof TemplateRef;\n          shouldOutletRecreate = isPreviousOutletTemplate || isCurrentOutletTemplate;\n        }\n      }\n\n      const hasContextShapeChanged = ctxChange => {\n        const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n        const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n\n        if (prevCtxKeys.length === currCtxKeys.length) {\n          for (const propName of currCtxKeys) {\n            if (prevCtxKeys.indexOf(propName) === -1) {\n              return true;\n            }\n          }\n\n          return false;\n        } else {\n          return true;\n        }\n      };\n\n      const shouldContextRecreate = nzStringTemplateOutletContext && hasContextShapeChanged(nzStringTemplateOutletContext);\n      return shouldContextRecreate || shouldOutletRecreate;\n    };\n\n    if (nzStringTemplateOutlet) {\n      this.context.$implicit = nzStringTemplateOutlet.currentValue;\n    }\n\n    const recreateView = shouldRecreateView();\n\n    if (recreateView) {\n      /** recreate view when context shape or outlet change **/\n      this.recreateView();\n    } else {\n      /** update context **/\n      this.updateContext();\n    }\n  }\n\n}\n\nNzStringTemplateOutletDirective.ɵfac = function NzStringTemplateOutletDirective_Factory(t) {\n  return new (t || NzStringTemplateOutletDirective)(i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.TemplateRef));\n};\n\nNzStringTemplateOutletDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NzStringTemplateOutletDirective,\n  selectors: [[\"\", \"nzStringTemplateOutlet\", \"\"]],\n  inputs: {\n    nzStringTemplateOutletContext: \"nzStringTemplateOutletContext\",\n    nzStringTemplateOutlet: \"nzStringTemplateOutlet\"\n  },\n  exportAs: [\"nzStringTemplateOutlet\"],\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzStringTemplateOutletDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[nzStringTemplateOutlet]',\n      exportAs: 'nzStringTemplateOutlet'\n    }]\n  }], function () {\n    return [{\n      type: i0.ViewContainerRef\n    }, {\n      type: i0.TemplateRef\n    }];\n  }, {\n    nzStringTemplateOutletContext: [{\n      type: Input\n    }],\n    nzStringTemplateOutlet: [{\n      type: Input\n    }]\n  });\n})();\n\nclass NzStringTemplateOutletContext {}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nclass NzOutletModule {}\n\nNzOutletModule.ɵfac = function NzOutletModule_Factory(t) {\n  return new (t || NzOutletModule)();\n};\n\nNzOutletModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NzOutletModule\n});\nNzOutletModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzOutletModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule],\n      exports: [NzStringTemplateOutletDirective],\n      declarations: [NzStringTemplateOutletDirective]\n    }]\n  }], null, null);\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NzOutletModule, NzStringTemplateOutletDirective };","map":{"version":3,"sources":["C:/Users/David/Desktop/GitHub Repos/SIS/node_modules/ng-zorro-antd/fesm2015/ng-zorro-antd-core-outlet.mjs"],"names":["CommonModule","i0","TemplateRef","Directive","Input","NgModule","NzStringTemplateOutletDirective","constructor","viewContainer","templateRef","embeddedViewRef","context","NzStringTemplateOutletContext","nzStringTemplateOutletContext","nzStringTemplateOutlet","ngTemplateContextGuard","_dir","_ctx","recreateView","clear","isTemplateRef","createEmbeddedView","updateContext","newCtx","oldCtx","propName","Object","keys","ngOnChanges","changes","shouldRecreateView","shouldOutletRecreate","firstChange","isPreviousOutletTemplate","previousValue","isCurrentOutletTemplate","currentValue","hasContextShapeChanged","ctxChange","prevCtxKeys","currCtxKeys","length","indexOf","shouldContextRecreate","$implicit","ɵfac","ViewContainerRef","ɵdir","type","args","selector","exportAs","NzOutletModule","ɵmod","ɵinj","imports","exports","declarations"],"mappings":"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","sourcesContent":["import { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { TemplateRef, Directive, Input, NgModule } from '@angular/core';\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzStringTemplateOutletDirective {\n    constructor(viewContainer, templateRef) {\n        this.viewContainer = viewContainer;\n        this.templateRef = templateRef;\n        this.embeddedViewRef = null;\n        this.context = new NzStringTemplateOutletContext();\n        this.nzStringTemplateOutletContext = null;\n        this.nzStringTemplateOutlet = null;\n    }\n    static ngTemplateContextGuard(_dir, _ctx) {\n        return true;\n    }\n    recreateView() {\n        this.viewContainer.clear();\n        const isTemplateRef = this.nzStringTemplateOutlet instanceof TemplateRef;\n        const templateRef = (isTemplateRef ? this.nzStringTemplateOutlet : this.templateRef);\n        this.embeddedViewRef = this.viewContainer.createEmbeddedView(templateRef, isTemplateRef ? this.nzStringTemplateOutletContext : this.context);\n    }\n    updateContext() {\n        const isTemplateRef = this.nzStringTemplateOutlet instanceof TemplateRef;\n        const newCtx = isTemplateRef ? this.nzStringTemplateOutletContext : this.context;\n        const oldCtx = this.embeddedViewRef.context;\n        if (newCtx) {\n            for (const propName of Object.keys(newCtx)) {\n                oldCtx[propName] = newCtx[propName];\n            }\n        }\n    }\n    ngOnChanges(changes) {\n        const { nzStringTemplateOutletContext, nzStringTemplateOutlet } = changes;\n        const shouldRecreateView = () => {\n            let shouldOutletRecreate = false;\n            if (nzStringTemplateOutlet) {\n                if (nzStringTemplateOutlet.firstChange) {\n                    shouldOutletRecreate = true;\n                }\n                else {\n                    const isPreviousOutletTemplate = nzStringTemplateOutlet.previousValue instanceof TemplateRef;\n                    const isCurrentOutletTemplate = nzStringTemplateOutlet.currentValue instanceof TemplateRef;\n                    shouldOutletRecreate = isPreviousOutletTemplate || isCurrentOutletTemplate;\n                }\n            }\n            const hasContextShapeChanged = (ctxChange) => {\n                const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n                const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n                if (prevCtxKeys.length === currCtxKeys.length) {\n                    for (const propName of currCtxKeys) {\n                        if (prevCtxKeys.indexOf(propName) === -1) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            };\n            const shouldContextRecreate = nzStringTemplateOutletContext && hasContextShapeChanged(nzStringTemplateOutletContext);\n            return shouldContextRecreate || shouldOutletRecreate;\n        };\n        if (nzStringTemplateOutlet) {\n            this.context.$implicit = nzStringTemplateOutlet.currentValue;\n        }\n        const recreateView = shouldRecreateView();\n        if (recreateView) {\n            /** recreate view when context shape or outlet change **/\n            this.recreateView();\n        }\n        else {\n            /** update context **/\n            this.updateContext();\n        }\n    }\n}\nNzStringTemplateOutletDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzStringTemplateOutletDirective, deps: [{ token: i0.ViewContainerRef }, { token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nNzStringTemplateOutletDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.2.5\", type: NzStringTemplateOutletDirective, selector: \"[nzStringTemplateOutlet]\", inputs: { nzStringTemplateOutletContext: \"nzStringTemplateOutletContext\", nzStringTemplateOutlet: \"nzStringTemplateOutlet\" }, exportAs: [\"nzStringTemplateOutlet\"], usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzStringTemplateOutletDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[nzStringTemplateOutlet]',\n                    exportAs: 'nzStringTemplateOutlet'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ViewContainerRef }, { type: i0.TemplateRef }]; }, propDecorators: { nzStringTemplateOutletContext: [{\n                type: Input\n            }], nzStringTemplateOutlet: [{\n                type: Input\n            }] } });\nclass NzStringTemplateOutletContext {\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzOutletModule {\n}\nNzOutletModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzOutletModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNzOutletModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzOutletModule, declarations: [NzStringTemplateOutletDirective], imports: [CommonModule], exports: [NzStringTemplateOutletDirective] });\nNzOutletModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzOutletModule, imports: [[CommonModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.5\", ngImport: i0, type: NzOutletModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    exports: [NzStringTemplateOutletDirective],\n                    declarations: [NzStringTemplateOutletDirective]\n                }]\n        }] });\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NzOutletModule, NzStringTemplateOutletDirective };\n"]},"metadata":{},"sourceType":"module"}